<!DOCTYPE html>
<html>
    <head>
        <style>
            table,th,td{
                border:2px solid red;
                border-collapse: collapse;
            }
        </style>
        <title>CRUD Operations</title>
    </head>
    <body>
        <h1 style="color:blue;text-align: center;">CRUD OPERATIONS</h1>
        <form onsubmit="saveData()">
            <label>First Name:</label>
            <input type="text" id="fname" placeholder="Enter First Name" >
            <label>Last Name:</label>
            <input type="text" id="lname" placeholder="Enter Last Name">
            <label>Age</label>
            <input type=number  id="age" placeholder="Enter Your Age">
            <input type="submit" value="save">
        </form>
        <br>
        <br>
        <table>
            <tr>    
                <th>First Name</th>
                <th>Last Name</th>
                <th>Age</th>
                <th>Action</th>
            </tr>
            <tbody id="mainData"></tbody>
        </table>
    </body>
    <script>
        var isupdate=false;
        selectedParent = null;
        function saveData(){
            event.preventDefault();
            if(isupdate===true){
            updateDataInRow();
            }
            else{
                createNewRow();
            }
            reset();
            function createNewRow(){
                let fname = document.getElementById("fname").value;
                let lname = document.getElementById("lname").value;
                let age = document.getElementById("age").value;
                console.log(fname,lname,age);
                
                let tableData = document.getElementById("mainData")
                tableData.innerHTML = tableData.innerHTML + `
                <tr>
                    <td>${fname}</td>
                    <td>${lname}</td>
                    <td>${age}</td>
                    <td class=""><button onclick="updateData(this)">Update</button>
                        <button onclick="deleteData(this)">Delete</button><td>
                </tr>
                `
            }
        }
        function reset(){
            document.getElementById("fname").value="";
            document.getElementById("lname").value="";
            document.getElementById("age").value="";
            isupdate = false;
        }
        function deleteData(self){
            console.log("Row is deleted");
            self.parentElement.parentElement.remove();
        }

        function updateData(self){
            isupdate=true;
            selectedParent = self.parentElement.parentElement;
            values = self.parentElement.parentElement.textContent.split("\n");
            document.getElementById("fname").value=values[1].trim();
            document.getElementById("lname").value=values[2].trim();
            document.getElementById("age").value=values[3].trim();
        }

        function updateDataInRow(){

            let fname = document.getElementById("fname").value;
            let lname = document.getElementById("lname").value;
            let age = document.getElementById("age").value;
            selectedParent.innerHTML=`
            <tr>
                    <td>${fname}</td>
                    <td>${lname}</td>
                    <td>${age}</td>
                    <td class=""><button onclick="updateData(this)">Update</button>
                        <button onclick="deleteData(this)">Delete</button><td>
            </tr>
            `
        }

    </script>
</html>